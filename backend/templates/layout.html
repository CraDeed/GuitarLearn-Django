{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static "bootstrap-4.5.2-dist/css/bootstrap.min.css" %}" />
        <script src="{% static "jquery-3.5.1.min.js" %}"></script>
        <script src="{% static 'jquery.form-3.51.0.min.js' %}"></script>
        <script src="{% static "bootstrap-4.5.2-dist/js/bootstrap.bundle.js" %}"></script>
        <title>Guitar, Learn!</title>
    </head>
    <body>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <div class="border-bottom mb-3">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 bg-white">
                            <h5 class="my-0 mr-md-auto font-weight-normal">
                                <a href="/">
                                    <img src="{% static 'logo2.png' %}" alt="guitarlearn" />
                                </a>
                            </h5>
                            <nav class="my-2 my-md-0 mr-md-3">
                                <div class="text-center mr-3">
                                    {{ user }}
                                </div>
                                
                                {% if not request.user.is_authenticated %}
                                    <a class="btn btn-outline-primary" href="{% url 'signup' %}">Sign Up</a>
                                    <a class="btn btn-outline-primary" href="{% url 'login' %}">Login</a>
                                {% else %}
                                    <a class="p-2 text-dark nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <img src="{{ user.avatar_url }}" class="rounded-circle" style="width:48px; height:48px;" />
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="{% url 'guitarlearn:playlist' user.username %}">Playlist</a>
                                        <a class="dropdown-item" href="{% url 'guitarlearn:user_page' user.username %}">Profile</a>
                                        <a class="dropdown-item" href="{% url 'logout' %}">logout</a>
                                    </div>
                                {% endif %}
                                
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        {% comment %} <script>
            function test() {
                    LoadingWithMask("{% url 'guitarlearn:search_list' %}");
                    setTimeout("closeLoadingWithMask()", 3000);
             }

            function LoadingWithMask() {
                //화면의 높이와 너비를 구합니다.
                var maskHeight = $(document).height();
                var maskWidth  = window.document.body.clientWidth;
                
                //화면에 출력할 마스크를 설정해줍니다.
                var mask       ="<div id='mask' style='position:absolute; z-index:9000; background-color:#000000; display:none; left:0; top:0;'></div>";
                var loadingImg ='';
                
                loadingImg +=" <img src='/backend/static/loading.gif' style='position: absolute; display: block; margin: 0px auto;'/>";
            
                //화면에 레이어 추가
                $('body')
                    .append(mask)
            
                //마스크의 높이와 너비를 화면 것으로 만들어 전체 화면을 채웁니다.
                $('#mask').css({
                        'width' : maskWidth,
                        'height': maskHeight,
                        'opacity' :'0.3'
                });
            
                //마스크 표시
                $('#mask').show();
            
                //로딩중 이미지 표시
                $('#loadingImg').append(loadingImg);
                $('#loadingImg').show();
            }
            
            function closeLoadingWithMask() {
                $('#mask, #loadingImg').hide();
                $('#mask, #loadingImg').empty(); 
            }
        </script> {% endcomment %}

        {% comment %} <div id="loading"><img id="loading-image" src="{% static 'loading.gif' %}" alt="Loading..." /></div>
        <script type="text/javascript"> $(window).load(function() { $('#loading').hide(); }); </script> {% endcomment %}
                

        {% block content %}
        {% endblock %}
    </body>
</html>
